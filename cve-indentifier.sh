
#!/bin/bash

# Asigna la dirección IP a la variable IP
IP="IP_ADDRESS"

# Ejecuta nmap para escanear los puertos, servicios y vulnerabilidades de la dirección IP
# y guarda los resultados en el archivo scan.txt
nmap -sV -sC  -p- -vvv -Pn   $IP > scan.txt 

# Verificamos si se han encontrado vulnerabilidades
if [ "$resultado" != "" ]
then
  # Mostramos un mensaje informando que se han encontrado vulnerabilidades
  echo "Se han encontrado vulnerabilidades:"

  # Recorremos cada línea del resultado
  while read -r line; do
    # Si la línea comienza con "|_" es una vulnerabilidad
    if [[ "$line" == \|_* ]]
    then
      # Mostramos la vulnerabilidad
      echo "$line"
    fi
  done <<< "$resultado"
else
  # Si no se han encontrado vulnerabilidades, mostramos un mensaje informando
  echo "No se han encontrado vulnerabilidades"
fi
